<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sleep & Food Tracker - Digital Diary</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"></script>
  <style>
    /* Notebook-like background */
    body {
      background-color: #f5f5f5;
      font-family: 'Arial', sans-serif;
    }

    .container {
      max-width: 1000px;
      margin-top: 50px;
    }

    .header {
      text-align: center;
      font-size: 2.5rem;
      font-weight: bold;
      color: #333;
      padding: 20px;
    }

    .note-card {
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      margin: 15px 0;
      padding: 20px;
      border-left: 5px solid #3498db;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .note-title {
      font-size: 1.4rem;
      font-weight: bold;
      color: #2c3e50;
    }

    .note-body {
      font-size: 1.1rem;
      color: #34495e;
      margin-top: 10px;
    }

    .form-section {
      background-color: #fff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      margin-bottom: 30px;
    }

    .btn-submit {
      background-color: #3498db;
      color: white;
      font-size: 1.1rem;
      border-radius: 5px;
      padding: 12px 20px;
      border: none;
      width: 100%;
      cursor: pointer;
    }

    .btn-submit:hover {
      background-color: #2980b9;
    }

    .date-input {
      width: 100%;
      padding: 10px;
      border-radius: 5px;
      border: 1px solid #ccc;
      margin-bottom: 10px;
    }

    .form-control {
      padding: 10px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }

    .note-list {
      max-height: 500px;
      overflow-y: auto;
      margin-top: 30px;
    }

    .note-list::-webkit-scrollbar {
      width: 8px;
    }

    .note-list::-webkit-scrollbar-thumb {
      background: #3498db;
      border-radius: 10px;
    }

    .note-list::-webkit-scrollbar-track {
      background: #f1f1f1;
    }

    .warning {
      color: #e74c3c;
      font-weight: bold;
      margin-top: 10px;
    }
  </style>
</head>
<body>

  <div class="container">
    <div class="header">
      Sleep & Food Tracker - Digital Diary
    </div>

    <div class="form-section">
      <h4 class="mb-4">Add New Entry</h4>
      <div class="mb-3">
        <label for="date" class="form-label">Date</label>
        <input type="date" id="date" class="form-control date-input">
      </div>

      <!-- Sleep Tracker -->
      <div class="mb-3">
        <label for="sleep-hours" class="form-label">Sleep Hours</label>
        <input type="number" id="sleep-hours" class="form-control" placeholder="Enter hours of sleep">
      </div>

      <!-- Food Tracker -->
      <div class="mb-3">
        <label for="food-calories" class="form-label">Calories Consumed</label>
        <input type="number" id="food-calories" class="form-control" placeholder="Enter calories">
      </div>

      <div class="mb-3">
        <label for="meal-count" class="form-label">Number of Meals</label>
        <input type="number" id="meal-count" class="form-control" placeholder="How many meals today?">
      </div>

      <!-- Benefits and Missing Nutrients -->
      <div class="mb-3">
        <label for="food-benefits" class="form-label">Food Benefits (Manual)</label>
        <textarea id="food-benefits" class="form-control" placeholder="Enter the benefits of food (e.g., Vitamin A, Fiber, etc.)"></textarea>
      </div>

      <div class="mb-3">
        <label for="missing-benefits" class="form-label">Missing Nutrients</label>
        <textarea id="missing-benefits" class="form-control" placeholder="Enter missing nutrients (e.g., Vitamin C, Protein, etc.)"></textarea>
      </div>

      <button class="btn-submit" id="save-btn">Save Data</button>
    </div>

    <div class="note-list" id="note-list">
      <!-- Saved notes will appear here -->
    </div>
  </div>

  <script>
    // Save button click event handler
    document.getElementById("save-btn").addEventListener("click", saveData);

    function saveData() {
      let date = document.getElementById("date").value;
      let sleepHours = parseInt(document.getElementById("sleep-hours").value);
      let foodCalories = parseInt(document.getElementById("food-calories").value);
      let mealCount = parseInt(document.getElementById("meal-count").value);
      let foodBenefits = document.getElementById("food-benefits").value;
      let missingBenefits = document.getElementById("missing-benefits").value;

      if (!date || !sleepHours || !foodCalories || !mealCount) {
        alert("Please fill all the fields!");
        return;
      }

      // Get current data from localStorage, or initialize if none exists
      let trackerData = JSON.parse(localStorage.getItem("trackerData")) || {};

      // Initialize the day's data if it doesn't exist
      if (!trackerData[date]) {
        trackerData[date] = {
          sleep: { hours: 0 },
          food: { calories: 0, mealCount: 0, benefits: "", missing: "" },
          emotion: "Not Positive",
          warning: ""
        };
      }

      // Update the data for the selected day
      trackerData[date].sleep.hours += sleepHours; // Accumulate sleep
      trackerData[date].food.calories += foodCalories; // Accumulate calories
      trackerData[date].food.mealCount += mealCount; // Accumulate meals
      trackerData[date].food.benefits = foodBenefits; // Save food benefits
      trackerData[date].food.missing = missingBenefits; // Save missing benefits

      // Calculate emotion based on total meals and total sleep
      let emotion = (trackerData[date].food.mealCount >= 3 && trackerData[date].sleep.hours >= 8) ? "Positive" : "Not Positive";
      trackerData[date].emotion = emotion;

      // Check for warnings
      let warning = "";
      if (trackerData[date].food.mealCount <= 1) {
        warning = "⚠: You ate 1 or fewer meals today!";
      } else if (trackerData[date].sleep.hours <= 4) {
        warning = "⚠: You slept 4 hours or less today!";
      }

      trackerData[date].warning = warning;

      // Save the updated data to localStorage
      localStorage.setItem("trackerData", JSON.stringify(trackerData));

      alert("Data saved successfully!");

      // Update the diary view
      updateNotes(trackerData);
    }

    // Function to delete an entry
    function deleteEntry(date) {
      let trackerData = JSON.parse(localStorage.getItem("trackerData"));
      delete trackerData[date];
      localStorage.setItem("trackerData", JSON.stringify(trackerData));
      updateNotes(trackerData);
    }

    function updateNotes(trackerData) {
      let noteList = document.getElementById('note-list');
      noteList.innerHTML = ""; // Clear current list

      for (let date in trackerData) {
        let noteDiv = document.createElement('div');
        noteDiv.classList.add('note-card');

        noteDiv.innerHTML = `
          <div>
            <div class="note-title">${date}</div>
            <div class="note-body">
              <strong>Sleep:</strong> ${trackerData[date].sleep.hours} hours<br>
              <strong>Meals:</strong> ${trackerData[date].food.mealCount} meals<br>
              <strong>Food Calories:</strong> ${trackerData[date].food.calories} calories<br>
              <strong>Emotion:</strong> ${trackerData[date].emotion}<br>
              <strong>Food Benefits:</strong> ${trackerData[date].food.benefits}<br>
              <strong>Missing Nutrients:</strong> ${trackerData[date].food.missing}<br>
              <strong>Warning:</strong> ${trackerData[date].warning}
            </div>
          </div>
          <button class="btn btn-danger" onclick="deleteEntry('${date}')">Delete</button>
        `;
        
        noteList.appendChild(noteDiv);
      }
    }

    // Initialize the notes on page load
    window.onload = () => {
      let trackerData = JSON.parse(localStorage.getItem("trackerData")) || {};
      updateNotes(trackerData);
    };
  </script>
</body>
</html>
